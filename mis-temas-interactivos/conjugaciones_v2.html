<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tiempos Verbales del Español - Programa Interactivo</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      @import url("https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap");
      @import url("https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800&display=swap");
      @import url("https://fonts.googleapis.com/css2?family=Fredoka+One:wght@400&display=swap");

      body {
        font-family: "Inter", sans-serif;
        background: #ffffff;
        position: relative;
        overflow-x: hidden;
      }

      .main-title {
        font-family: "Poppins", sans-serif;
        font-weight: 800;
        color: #1f2937;
        letter-spacing: -1px;
      }

      .level-title {
        font-family: "Poppins", sans-serif;
        font-weight: 700;
        text-transform: uppercase;
        letter-spacing: 1px;
      }

      .card-hover {
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        transform-style: preserve-3d;
        position: relative;
        border: 1px solid rgba(255, 255, 255, 0.1);
      }

      .card-hover::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(
          135deg,
          rgba(255, 255, 255, 0.2),
          rgba(255, 255, 255, 0.05)
        );
        border-radius: inherit;
        opacity: 0;
        transition: opacity 0.3s ease;
      }

      .card-hover:hover::before {
        opacity: 1;
      }

      .card-hover:hover {
        transform: translateY(-6px) scale(1.02);
        box-shadow: 0 25px 50px rgba(0, 0, 0, 0.25),
          0 12px 24px rgba(0, 0, 0, 0.15),
          inset 0 1px 0 rgba(255, 255, 255, 0.3);
      }

      .card-hover:active {
        transform: translateY(-3px) scale(1.01);
      }

      .floating-shapes {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: -1;
      }

      .shape {
        position: absolute;
        opacity: 0.1;
        animation: float 6s ease-in-out infinite;
      }

      .shape:nth-child(1) {
        top: 10%;
        left: 10%;
        animation-delay: 0s;
      }

      .shape:nth-child(2) {
        top: 20%;
        right: 10%;
        animation-delay: 2s;
      }

      .shape:nth-child(3) {
        bottom: 20%;
        left: 20%;
        animation-delay: 4s;
      }

      .shape:nth-child(4) {
        bottom: 10%;
        right: 20%;
        animation-delay: 1s;
      }

      @keyframes float {
        0%,
        100% {
          transform: translateY(0px) rotate(0deg);
        }
        50% {
          transform: translateY(-20px) rotate(180deg);
        }
      }

      .fade-in {
        animation: fadeIn 0.8s ease-in;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(30px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .slide-in {
        animation: slideIn 0.4s ease-out;
      }

      @keyframes slideIn {
        from {
          opacity: 0;
          transform: translateX(30px);
        }
        to {
          opacity: 1;
          transform: translateX(0);
        }
      }

      .pulse-icon {
        animation: pulse 2s infinite;
      }

      @keyframes pulse {
        0% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.1);
        }
        100% {
          transform: scale(1);
        }
      }

      .glass-effect {
        background: rgba(255, 255, 255, 0.08);
        backdrop-filter: blur(20px);
        border: 1px solid rgba(255, 255, 255, 0.12);
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12),
          inset 0 1px 0 rgba(255, 255, 255, 0.1);
      }

      .tap-hint {
        font-size: 0.75rem;
        opacity: 0.8;
        font-weight: 500;
      }

      /* Media queries para responsividad móvil */
      @media (max-width: 768px) {
        .mobile-grid {
          grid-template-columns: 1fr !important;
        }

        .mobile-full-width {
          width: 100% !important;
          margin-left: 0 !important;
          margin-right: 0 !important;
        }

        .mobile-text-center {
          text-align: center !important;
        }

        .mobile-stack {
          flex-direction: column !important;
        }

        .mobile-padding {
          padding: 1rem !important;
        }

        .mobile-margin-bottom {
          margin-bottom: 1rem !important;
        }

        .mobile-small-text {
          font-size: 0.875rem !important;
        }

        .mobile-hide {
          display: none !important;
        }
      }

      /* Asegurar que el modal sea responsive */
      @media (max-width: 640px) {
        #verbModal .bg-white {
          margin: 0.5rem !important;
          max-height: calc(100vh - 1rem) !important;
          width: calc(100% - 1rem) !important;
        }

        #verbModal .flex.space-x-3 {
          flex-wrap: wrap !important;
          gap: 0.5rem !important;
        }

        #verbModal .flex.space-x-3 button {
          flex: 1 0 calc(50% - 0.25rem) !important;
          min-width: calc(50% - 0.25rem) !important;
          padding: 0.5rem 0.25rem !important;
          font-size: 0.75rem !important;
        }
      }

      /* Asegurar que las tablas sean responsive */
      @media (max-width: 768px) {
        .overflow-x-auto {
          overflow-x: auto !important;
        }
      }
    </style>
  </head>
  <body class="min-h-screen">
    <!-- Floating Background Shapes -->
    <div class="floating-shapes">
      <div class="shape w-32 h-32 bg-pink-300 rounded-full"></div>
      <div class="shape w-24 h-24 bg-blue-300 rounded-full"></div>
      <div class="shape w-40 h-40 bg-yellow-300 rounded-full"></div>
      <div class="shape w-28 h-28 bg-green-300 rounded-full"></div>
    </div>
    <!-- Header -->
    <header
      class="bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 shadow-xl border-b border-blue-100"
    >
      <div class="max-w-7xl mx-auto px-4 py-6 md:py-12">
        <div class="text-center">
          <h1
            class="main-title text-2xl md:text-4xl lg:text-6xl font-bold mb-4 text-blue-800 drop-shadow-sm"
          >
            Explore all tenses in Spanish 📚
          </h1>
          <p
            class="text-blue-700 text-base md:text-lg font-medium tracking-wide mb-6 md:mb-8"
          >
            Learn easily and have fun while doing it!
          </p>
          <div
            class="flex flex-col md:flex-row justify-center flex-wrap gap-3 md:gap-4 mt-6 md:mt-8"
          >
            <div
              class="bg-gradient-to-r from-emerald-400 to-green-500 text-white px-4 md:px-6 py-3 md:py-4 rounded-2xl shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300 cursor-pointer w-full md:w-auto"
            >
              <div
                class="flex items-center space-x-3 justify-center md:justify-start"
              >
                <span class="text-xl md:text-2xl">📚</span>
                <div>
                  <div class="font-bold text-base md:text-lg">
                    14 Verb Tenses
                  </div>
                  <div class="text-xs md:text-sm opacity-90">
                    Complete coverage
                  </div>
                </div>
              </div>
            </div>
            <div
              class="bg-gradient-to-r from-purple-400 to-indigo-500 text-white px-4 md:px-6 py-3 md:py-4 rounded-2xl shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300 cursor-pointer w-full md:w-auto"
            >
              <div
                class="flex items-center space-x-3 justify-center md:justify-start"
              >
                <span class="text-xl md:text-2xl">🎯</span>
                <div>
                  <div class="font-bold text-base md:text-lg">
                    3 Difficulty Levels
                  </div>
                  <div class="text-xs md:text-sm opacity-90">
                    Progressive learning
                  </div>
                </div>
              </div>
            </div>
            <div
              class="bg-gradient-to-r from-orange-400 to-red-500 text-white px-4 md:px-6 py-3 md:py-4 rounded-2xl shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300 cursor-pointer w-full md:w-auto"
            >
              <div
                class="flex items-center space-x-3 justify-center md:justify-start"
              >
                <span class="text-xl md:text-2xl">🌟</span>
                <div>
                  <div class="font-bold text-base md:text-lg">
                    Interactive Examples
                  </div>
                  <div class="text-xs md:text-sm opacity-90">
                    Learn by doing
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </header>

    <!-- Main Content -->
    <main
      class="max-w-7xl mx-auto px-3 md:px-4 py-6 md:py-8 bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 min-h-screen"
    >
      <!-- Level Selection -->
      <div id="levelSelection" class="space-y-6 md:space-y-8">
        <!-- Basic Level -->
        <section
          class="bg-gradient-to-br from-emerald-400 via-green-500 to-teal-600 rounded-2xl md:rounded-3xl shadow-2xl p-4 md:p-8 border-2 border-emerald-300 fade-in relative overflow-hidden cursor-pointer hover:shadow-3xl hover:scale-[1.02] transition-all duration-300"
          onclick="toggleLevel('basic')"
        >
          <div
            class="absolute inset-0 bg-gradient-to-r from-white/30 to-transparent"
          ></div>
          <div
            class="absolute inset-0 bg-gradient-to-br from-emerald-300/20 via-transparent to-green-600/20"
          ></div>
          <div class="relative z-10">
            <div
              class="flex flex-col md:flex-row items-center justify-between mb-6 md:mb-8"
            >
              <div class="flex items-center mb-4 md:mb-0">
                <span
                  class="text-4xl md:text-6xl mr-4 md:mr-6 pulse-icon drop-shadow-lg"
                  >🌱</span
                >
                <div>
                  <h2
                    class="level-title text-2xl md:text-4xl text-white font-black drop-shadow-lg"
                  >
                    Nivel Básico
                  </h2>
                  <p
                    class="text-emerald-100 text-base md:text-lg font-semibold mt-1 md:mt-2 drop-shadow-sm"
                  >
                    Start your adventure here!
                  </p>
                </div>
              </div>
              <div class="flex items-center space-x-2 md:space-x-4">
                <span
                  class="text-white font-bold bg-emerald-600/30 px-3 md:px-4 py-1 md:py-2 rounded-full backdrop-blur-sm text-sm md:text-base"
                  >5 verb tenses</span
                >
                <span
                  id="basicArrow"
                  class="text-2xl md:text-4xl text-white transition-transform duration-300 drop-shadow-lg"
                  >▼</span
                >
              </div>
            </div>
          </div>
          <div id="basicContent" class="hidden">
            <div
              class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6"
            >
              <div
                class="verb-card card-hover bg-gradient-to-br from-pink-300 to-rose-400 rounded-2xl p-4 md:p-6 cursor-pointer shadow-lg"
                onclick="event.stopPropagation(); openVerbModal('presente-simple', 'Presente Simple', 'basic')"
              >
                <h3
                  class="font-bold text-pink-900 text-base md:text-lg mb-2 md:mb-3"
                >
                  Presente Simple
                </h3>
                <p class="text-pink-800 text-xs md:text-sm mb-2 md:mb-3">
                  Habitual actions and current states
                </p>
                <p class="tap-hint text-pink-700">Tap to explore 👉</p>
              </div>
              <div
                class="verb-card card-hover bg-gradient-to-br from-orange-300 to-amber-400 rounded-2xl p-4 md:p-6 cursor-pointer shadow-lg"
                onclick="event.stopPropagation(); openVerbModal('presente-continuo', 'Presente Continuo', 'basic')"
              >
                <h3
                  class="font-bold text-orange-900 text-base md:text-lg mb-2 md:mb-3"
                >
                  Presente Continuo
                </h3>
                <p class="text-orange-800 text-xs md:text-sm mb-2 md:mb-3">
                  Actions in progress
                </p>
                <p class="tap-hint text-orange-700">Tap to explore 👉</p>
              </div>
              <div
                class="verb-card card-hover bg-gradient-to-br from-violet-300 to-purple-400 rounded-2xl p-4 md:p-6 cursor-pointer shadow-lg"
                onclick="event.stopPropagation(); openVerbModal('preterito-indefinido', 'Pretérito Indefinido', 'basic')"
              >
                <h3
                  class="font-bold text-violet-900 text-base md:text-lg mb-2 md:mb-3"
                >
                  Pretérito Indefinido
                </h3>
                <p class="text-violet-800 text-xs md:text-sm mb-2 md:mb-3">
                  Completed past actions
                </p>
                <p class="tap-hint text-violet-700">Tap to explore 👉</p>
              </div>
              <div
                class="verb-card card-hover bg-gradient-to-br from-cyan-300 to-sky-400 rounded-2xl p-4 md:p-6 cursor-pointer shadow-lg"
                onclick="event.stopPropagation(); openVerbModal('preterito-imperfecto', 'Pretérito Imperfecto', 'basic')"
              >
                <h3
                  class="font-bold text-cyan-900 text-base md:text-lg mb-2 md:mb-3"
                >
                  Pretérito Imperfecto
                </h3>
                <p class="text-cyan-800 text-xs md:text-sm mb-2 md:mb-3">
                  Habitual past actions
                </p>
                <p class="tap-hint text-cyan-700">Tap to explore 👉</p>
              </div>
              <div
                class="verb-card card-hover bg-gradient-to-br from-lime-300 to-green-400 rounded-2xl p-4 md:p-6 cursor-pointer shadow-lg"
                onclick="event.stopPropagation(); openVerbModal('futuro-ir-a', 'Futuro con ir a', 'basic')"
              >
                <h3
                  class="font-bold text-lime-900 text-base md:text-lg mb-2 md:mb-3"
                >
                  Futuro con "ir a"
                </h3>
                <p class="text-lime-800 text-xs md:text-sm mb-2 md:mb-3">
                  Future plans and intentions
                </p>
                <p class="tap-hint text-lime-700">Tap to explore 👉</p>
              </div>
            </div>
          </div>
        </section>

        <!-- Intermediate Level -->
        <section
          class="bg-gradient-to-br from-orange-400 via-amber-500 to-yellow-600 rounded-2xl md:rounded-3xl shadow-2xl p-4 md:p-8 border-2 border-orange-300 fade-in relative overflow-hidden cursor-pointer hover:shadow-3xl hover:scale-[1.02] transition-all duration-300"
          onclick="toggleLevel('intermediate')"
        >
          <div
            class="absolute inset-0 bg-gradient-to-r from-white/30 to-transparent"
          ></div>
          <div
            class="absolute inset-0 bg-gradient-to-br from-orange-300/20 via-transparent to-amber-600/20"
          ></div>
          <div class="relative z-10">
            <div
              class="flex flex-col md:flex-row items-center justify-between mb-6 md:mb-8"
            >
              <div class="flex items-center mb-4 md:mb-0">
                <span
                  class="text-4xl md:text-6xl mr-4 md:mr-6 pulse-icon drop-shadow-lg"
                  >🌿</span
                >
                <div>
                  <h2
                    class="level-title text-2xl md:text-4xl text-white font-black drop-shadow-lg"
                  >
                    Nivel Intermedio
                  </h2>
                  <p
                    class="text-orange-100 text-base md:text-lg font-semibold mt-1 md:mt-2 drop-shadow-sm"
                  >
                    Keep growing and improving!
                  </p>
                </div>
              </div>
              <div class="flex items-center space-x-2 md:space-x-4">
                <span
                  class="text-white font-bold bg-orange-600/30 px-3 md:px-4 py-1 md:py-2 rounded-full backdrop-blur-sm text-sm md:text-base"
                  >5 verb tenses</span
                >
                <span
                  id="intermediateArrow"
                  class="text-2xl md:text-4xl text-white transition-transform duration-300 drop-shadow-lg"
                  >▼</span
                >
              </div>
            </div>
          </div>
          <div id="intermediateContent" class="hidden">
            <div
              class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6"
            >
              <div
                class="verb-card card-hover bg-gradient-to-br from-amber-200 to-orange-300 rounded-2xl p-4 md:p-6 cursor-pointer shadow-lg"
                onclick="event.stopPropagation(); openVerbModal('condicional-simple', 'Condicional Simple', 'intermediate')"
              >
                <h3
                  class="font-bold text-amber-800 text-base md:text-lg mb-2 md:mb-3"
                >
                  Condicional Simple
                </h3>
                <p class="text-amber-700 text-xs md:text-sm mb-2 md:mb-3">
                  Hypothetical situations
                </p>
                <p class="tap-hint text-amber-600">Tap to explore 👉</p>
              </div>
              <div
                class="verb-card card-hover bg-gradient-to-br from-cyan-200 to-sky-300 rounded-2xl p-4 md:p-6 cursor-pointer shadow-lg"
                onclick="event.stopPropagation(); openVerbModal('presente-perfecto', 'Presente Perfecto', 'intermediate')"
              >
                <h3
                  class="font-bold text-cyan-800 text-base md:text-lg mb-2 md:mb-3"
                >
                  Presente Perfecto
                </h3>
                <p class="text-cyan-700 text-xs md:text-sm mb-2 md:mb-3">
                  Past actions with present relevance
                </p>
                <p class="tap-hint text-cyan-600">Tap to explore 👉</p>
              </div>
              <div
                class="verb-card card-hover bg-gradient-to-br from-rose-200 to-pink-300 rounded-2xl p-4 md:p-6 cursor-pointer shadow-lg"
                onclick="event.stopPropagation(); openVerbModal('pasado-continuo', 'Pasado Continuo', 'intermediate')"
              >
                <h3
                  class="font-bold text-rose-800 text-base md:text-lg mb-2 md:mb-3"
                >
                  Pasado Continuo
                </h3>
                <p class="text-rose-700 text-xs md:text-sm mb-2 md:mb-3">
                  Past actions in progress
                </p>
                <p class="tap-hint text-rose-600">Tap to explore 👉</p>
              </div>
              <div
                class="verb-card card-hover bg-gradient-to-br from-violet-200 to-purple-300 rounded-2xl p-4 md:p-6 cursor-pointer shadow-lg"
                onclick="event.stopPropagation(); openVerbModal('futuro-simple', 'Futuro Simple', 'intermediate')"
              >
                <h3
                  class="font-bold text-violet-800 text-base md:text-lg mb-2 md:mb-3"
                >
                  Futuro Simple
                </h3>
                <p class="text-violet-700 text-xs md:text-sm mb-2 md:mb-3">
                  Future actions
                </p>
                <p class="tap-hint text-violet-600">Tap to explore 👉</p>
              </div>
              <div
                class="verb-card card-hover bg-gradient-to-br from-lime-200 to-green-300 rounded-2xl p-4 md:p-6 cursor-pointer shadow-lg"
                onclick="event.stopPropagation(); openVerbModal('imperativo-positivo', 'Imperativo Positivo', 'intermediate')"
              >
                <h3
                  class="font-bold text-lime-800 text-base md:text-lg mb-2 md:mb-3"
                >
                  Imperativo Positivo
                </h3>
                <p class="text-lime-700 text-xs md:text-sm mb-2 md:mb-3">
                  Affirmative commands and orders
                </p>
                <p class="tap-hint text-lime-600">Tap to explore 👉</p>
              </div>
            </div>
          </div>
        </section>

        <!-- Advanced Level -->
        <section
          class="bg-gradient-to-br from-purple-500 via-indigo-600 to-blue-700 rounded-2xl md:rounded-3xl shadow-2xl p-4 md:p-8 border-2 border-purple-300 fade-in relative overflow-hidden cursor-pointer hover:shadow-3xl hover:scale-[1.02] transition-all duration-300"
          onclick="toggleLevel('advanced')"
        >
          <div
            class="absolute inset-0 bg-gradient-to-r from-white/30 to-transparent"
          ></div>
          <div
            class="absolute inset-0 bg-gradient-to-br from-purple-400/20 via-transparent to-indigo-700/20"
          ></div>
          <div class="relative z-10">
            <div
              class="flex flex-col md:flex-row items-center justify-between mb-6 md:mb-8"
            >
              <div class="flex items-center mb-4 md:mb-0">
                <span
                  class="text-4xl md:text-6xl mr-4 md:mr-6 pulse-icon drop-shadow-lg"
                  >🌳</span
                >
                <div>
                  <h2
                    class="level-title text-2xl md:text-4xl text-white font-black drop-shadow-lg"
                  >
                    Nivel Avanzado
                  </h2>
                  <p
                    class="text-purple-100 text-base md:text-lg font-semibold mt-1 md:mt-2 drop-shadow-sm"
                  >
                    Master Spanish like an expert!
                  </p>
                </div>
              </div>
              <div class="flex items-center space-x-2 md:space-x-4">
                <span
                  class="text-white font-bold bg-purple-600/30 px-3 md:px-4 py-1 md:py-2 rounded-full backdrop-blur-sm text-sm md:text-base"
                  >4 verb tenses</span
                >
                <span
                  id="advancedArrow"
                  class="text-2xl md:text-4xl text-white transition-transform duration-300 drop-shadow-lg"
                  >▼</span
                >
              </div>
            </div>
          </div>
          <div id="advancedContent" class="hidden">
            <div
              class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6"
            >
              <div
                class="verb-card card-hover bg-gradient-to-br from-amber-300 to-yellow-400 rounded-2xl p-4 md:p-6 cursor-pointer shadow-lg"
                onclick="event.stopPropagation(); openVerbModal('preterito-pluscuamperfecto', 'Pretérito Pluscuamperfecto', 'advanced')"
              >
                <h3
                  class="font-bold text-amber-900 text-base md:text-lg mb-2 md:mb-3"
                >
                  Pretérito Pluscuamperfecto
                </h3>
                <p class="text-amber-800 text-xs md:text-sm mb-2 md:mb-3">
                  Actions prior to other past actions
                </p>
                <p class="tap-hint text-amber-700">Tap to explore 👉</p>
              </div>
              <div
                class="verb-card card-hover bg-gradient-to-br from-red-300 to-rose-400 rounded-2xl p-4 md:p-6 cursor-pointer shadow-lg"
                onclick="event.stopPropagation(); openVerbModal('subjuntivo-presente', 'Subjuntivo Presente', 'advanced')"
              >
                <h3
                  class="font-bold text-red-900 text-base md:text-lg mb-2 md:mb-3"
                >
                  Subjuntivo Presente
                </h3>
                <p class="text-red-800 text-xs md:text-sm mb-2 md:mb-3">
                  Express wishes, doubts and emotions
                </p>
                <p class="tap-hint text-red-700">Tap to explore 👉</p>
              </div>
              <div
                class="verb-card card-hover bg-gradient-to-br from-indigo-300 to-violet-400 rounded-2xl p-4 md:p-6 cursor-pointer shadow-lg"
                onclick="event.stopPropagation(); openVerbModal('subjuntivo-imperfecto', 'Pretérito Imperfecto del Subjuntivo', 'advanced')"
              >
                <h3
                  class="font-bold text-indigo-900 text-base md:text-lg mb-2 md:mb-3"
                >
                  Subjuntivo Imperfecto
                </h3>
                <p class="text-indigo-800 text-xs md:text-sm mb-2 md:mb-3">
                  Subjunctive in past contexts
                </p>
                <p class="tap-hint text-indigo-700">Tap to explore 👉</p>
              </div>
              <div
                class="verb-card card-hover bg-gradient-to-br from-teal-300 to-cyan-400 rounded-2xl p-4 md:p-6 cursor-pointer shadow-lg"
                onclick="event.stopPropagation(); openVerbModal('imperativo-negativo', 'Imperativo Negativo', 'advanced')"
              >
                <h3
                  class="font-bold text-teal-900 text-base md:text-lg mb-2 md:mb-3"
                >
                  Imperativo Negativo
                </h3>
                <p class="text-teal-800 text-xs md:text-sm mb-2 md:mb-3">
                  Prohibitions and negative commands
                </p>
                <p class="tap-hint text-teal-700">Tap to explore 👉</p>
              </div>
            </div>
          </div>
        </section>
      </div>

      <!-- Modal -->
      <div
        id="verbModal"
        class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center p-2 md:p-4 overflow-y-auto"
      >
        <div
          class="bg-white rounded-xl md:rounded-2xl w-full max-w-4xl max-h-[90vh] md:max-h-[90vh] overflow-y-auto mx-2 md:mx-auto"
        >
          <div
            class="p-4 md:p-6 border-b border-gray-200 flex justify-between items-center"
          >
            <h2
              id="modalTitle"
              class="text-xl md:text-2xl font-bold text-gray-800"
            ></h2>
            <button
              onclick="closeModal()"
              class="text-gray-500 hover:text-gray-700 text-2xl"
            >
              ×
            </button>
          </div>

          <div class="p-4 md:p-6">
            <!-- Navigation -->
            <div class="flex justify-center mb-6 md:mb-8">
              <div
                class="flex flex-wrap justify-center gap-2 bg-gray-100 p-2 rounded-xl md:rounded-2xl w-full"
              >
                <button
                  id="navAR"
                  onclick="showConjugation('AR')"
                  class="px-3 md:px-6 py-2 md:py-3 rounded-lg md:rounded-xl bg-gradient-to-r from-red-500 to-red-600 text-white font-bold shadow-lg transform transition-all duration-200 hover:scale-105 text-sm md:text-base w-full md:w-auto"
                >
                  Verbos -AR
                </button>
                <button
                  id="navER"
                  onclick="showConjugation('ER')"
                  class="px-3 md:px-6 py-2 md:py-3 rounded-lg md:rounded-xl bg-gray-200 text-gray-600 font-bold transition-all duration-200 hover:bg-gray-300 text-sm md:text-base w-full md:w-auto"
                >
                  Verbos -ER
                </button>
                <button
                  id="navIR"
                  onclick="showConjugation('IR')"
                  class="px-3 md:px-6 py-2 md:py-3 rounded-lg md:rounded-xl bg-gray-200 text-gray-600 font-bold transition-all duration-200 hover:bg-gray-300 text-sm md:text-base w-full md:w-auto"
                >
                  Verbos -IR
                </button>
                <button
                  id="navComparison"
                  onclick="showComparison()"
                  class="px-3 md:px-6 py-2 md:py-3 rounded-lg md:rounded-xl bg-gray-200 text-gray-600 font-bold transition-all duration-200 hover:bg-gray-300 text-sm md:text-base w-full md:w-auto"
                >
                  Comparación
                </button>
                <button
                  id="navPractice"
                  onclick="showPractice()"
                  class="px-3 md:px-6 py-2 md:py-3 rounded-lg md:rounded-xl bg-gray-200 text-gray-600 font-bold transition-all duration-200 hover:bg-gray-300 text-sm md:text-base w-full md:w-auto"
                >
                  🎯 Práctica
                </button>
              </div>
            </div>

            <!-- Content Area -->
            <div id="conjugationContent" class="fade-in">
              <!-- Content will be dynamically loaded here -->
            </div>
          </div>
        </div>
      </div>
    </main>

    <script>
      // Verb data structure
      const verbData = {
        "presente-simple": {
          title: "Presente Simple",
          AR: {
            endings: ["o", "as", "a", "amos", "an", "áis"],
            example: "Yo hablo español todos los días. 🗣️",
            translation: "I speak Spanish every day. 🗣️",
          },
          ER: {
            endings: ["o", "es", "e", "emos", "en", "éis"],
            example: "Ella come frutas por la mañana. 🍎",
            translation: "She eats fruits in the morning. 🍎",
          },
          IR: {
            endings: ["o", "es", "e", "imos", "en", "ís"],
            example: "Nosotros vivimos en Madrid. 🏠",
            translation: "We live in Madrid. 🏠",
          },
        },
        "presente-continuo": {
          title: "Presente Continuo",
          AR: {
            endings: [
              "estoy + -ando",
              "estás + -ando",
              "está + -ando",
              "estamos + -ando",
              "están + -ando",
              "estáis + -ando",
            ],
            example: "Estoy estudiando para el examen. 📚",
            translation: "I am studying for the exam. 📚",
          },
          ER: {
            endings: [
              "estoy + -iendo",
              "estás + -iendo",
              "está + -iendo",
              "estamos + -iendo",
              "están + -iendo",
              "estáis + -iendo",
            ],
            example: "Él está corriendo en el parque. 🏃‍♂️",
            translation: "He is running in the park. 🏃‍♂️",
          },
          IR: {
            endings: [
              "estoy + -iendo",
              "estás + -iendo",
              "está + -iendo",
              "estamos + -iendo",
              "están + -iendo",
              "estáis + -iendo",
            ],
            example: "Estamos escribiendo una carta. ✍️",
            translation: "We are writing a letter. ✍️",
          },
        },
        "preterito-indefinido": {
          title: "Pretérito Indefinido",
          AR: {
            endings: ["é", "aste", "ó", "amos", "aron", "asteis"],
            example: "Ayer hablé con mi hermana. 📞",
            translation: "Yesterday I spoke with my sister. 📞",
          },
          ER: {
            endings: ["í", "iste", "ió", "imos", "ieron", "isteis"],
            example: "Ella comió pizza anoche. 🍕",
            translation: "She ate pizza last night. 🍕",
          },
          IR: {
            endings: ["í", "iste", "ió", "imos", "ieron", "isteis"],
            example: "Vivimos allí durante cinco años. 🏘️",
            translation: "We lived there for five years. 🏘️",
          },
        },
        "preterito-imperfecto": {
          title: "Pretérito Imperfecto",
          AR: {
            endings: ["aba", "abas", "aba", "ábamos", "aban", "abais"],
            example: "Cuando era niño, jugaba fútbol. ⚽",
            translation: "When I was a child, I used to play soccer. ⚽",
          },
          ER: {
            endings: ["ía", "ías", "ía", "íamos", "ían", "íais"],
            example: "Ella siempre comía verduras. 🥬",
            translation: "She always used to eat vegetables. 🥬",
          },
          IR: {
            endings: ["ía", "ías", "ía", "íamos", "ían", "íais"],
            example: "Vivíamos cerca del mar. 🌊",
            translation: "We used to live near the sea. 🌊",
          },
        },
        "futuro-ir-a": {
          title: 'Futuro con "ir a"',
          AR: {
            endings: [
              "voy a + infinitivo",
              "vas a + infinitivo",
              "va a + infinitivo",
              "vamos a + infinitivo",
              "van a + infinitivo",
              "vais a + infinitivo",
            ],
            example: "Voy a estudiar esta noche. 🌙",
            translation: "I am going to study tonight. 🌙",
          },
          ER: {
            endings: [
              "voy a + infinitivo",
              "vas a + infinitivo",
              "va a + infinitivo",
              "vamos a + infinitivo",
              "van a + infinitivo",
              "vais a + infinitivo",
            ],
            example: "Ella va a comer con nosotros. 🍽️",
            translation: "She is going to eat with us. 🍽️",
          },
          IR: {
            endings: [
              "voy a + infinitivo",
              "vas a + infinitivo",
              "va a + infinitivo",
              "vamos a + infinitivo",
              "van a + infinitivo",
              "vais a + infinitivo",
            ],
            example: "Vamos a vivir en otra ciudad. 🏙️",
            translation: "We are going to live in another city. 🏙️",
          },
        },
        "condicional-simple": {
          title: "Condicional Simple",
          AR: {
            endings: ["aría", "arías", "aría", "aríamos", "arían", "aríais"],
            example: "Hablaría contigo si tuviera tiempo. ⏰",
            translation: "I would speak with you if I had time. ⏰",
          },
          ER: {
            endings: ["ería", "erías", "ería", "eríamos", "erían", "eríais"],
            example: "Comería más si fuera necesario. 🤔",
            translation: "I would eat more if it were necessary. 🤔",
          },
          IR: {
            endings: ["iría", "irías", "iría", "iríamos", "irían", "iríais"],
            example: "Viviríamos allí con gusto. 😊",
            translation: "We would live there gladly. 😊",
          },
        },
        "presente-perfecto": {
          title: "Presente Perfecto",
          AR: {
            endings: [
              "he + -ado",
              "has + -ado",
              "ha + -ado",
              "hemos + -ado",
              "han + -ado",
              "habéis + -ado",
            ],
            example: "He hablado con el profesor. 👨‍🏫",
            translation: "I have spoken with the teacher. 👨‍🏫",
          },
          ER: {
            endings: [
              "he + -ido",
              "has + -ido",
              "ha + -ido",
              "hemos + -ido",
              "han + -ido",
              "habéis + -ido",
            ],
            example: "Ella ha comido ya. ✅",
            translation: "She has already eaten. ✅",
          },
          IR: {
            endings: [
              "he + -ido",
              "has + -ido",
              "ha + -ido",
              "hemos + -ido",
              "han + -ido",
              "habéis + -ido",
            ],
            example: "Hemos vivido aquí mucho tiempo. 📅",
            translation: "We have lived here for a long time. 📅",
          },
        },
        "pasado-continuo": {
          title: "Pasado Continuo",
          AR: {
            endings: [
              "estaba + -ando",
              "estabas + -ando",
              "estaba + -ando",
              "estábamos + -ando",
              "estaban + -ando",
              "estabais + -ando",
            ],
            example: "Estaba hablando por teléfono. ☎️",
            translation: "I was talking on the phone. ☎️",
          },
          ER: {
            endings: [
              "estaba + -iendo",
              "estabas + -iendo",
              "estaba + -iendo",
              "estábamos + -iendo",
              "estaban + -iendo",
              "estabais + -iendo",
            ],
            example: "Estaba comiendo cuando llegaste. 🚪",
            translation: "I was eating when you arrived. 🚪",
          },
          IR: {
            endings: [
              "estaba + -iendo",
              "estabas + -iendo",
              "estaba + -iendo",
              "estábamos + -iendo",
              "estaban + -iendo",
              "estabais + -iendo",
            ],
            example: "Estábamos escribiendo el informe. 📄",
            translation: "We were writing the report. 📄",
          },
        },
        "futuro-simple": {
          title: "Futuro Simple",
          AR: {
            endings: ["aré", "arás", "ará", "aremos", "arán", "aréis"],
            example: "Hablaré con él mañana. 🌅",
            translation: "I will speak with him tomorrow. 🌅",
          },
          ER: {
            endings: ["eré", "erás", "erá", "eremos", "erán", "eréis"],
            example: "Comeremos juntos el domingo. 🍽️",
            translation: "We will eat together on Sunday. 🍽️",
          },
          IR: {
            endings: ["iré", "irás", "irá", "iremos", "irán", "iréis"],
            example: "Vivirán en París el próximo año. 🗼",
            translation: "They will live in Paris next year. 🗼",
          },
        },
        "imperativo-positivo": {
          title: "Imperativo Positivo",
          AR: {
            endings: ["-a", "-e", "-emos", "-en", "-ad"],
            example: "¡Habla más despacio, por favor! (tú) 🐌",
            translation: "Speak more slowly, please! 🐌",
          },
          ER: {
            endings: ["-e", "-a", "-amos", "-an", "-ed"],
            example: "¡Come todas las verduras! (tú) 🥕",
            translation: "Eat all the vegetables! 🥕",
          },
          IR: {
            endings: ["-e", "-a", "-amos", "-an", "-id"],
            example: "¡Vive la vida al máximo! (tú) 🌟",
            translation: "Live life to the fullest! 🌟",
          },
        },
        "preterito-pluscuamperfecto": {
          title: "Pretérito Pluscuamperfecto",
          AR: {
            endings: [
              "había + -ado",
              "habías + -ado",
              "había + -ado",
              "habíamos + -ado",
              "habían + -ado",
              "habíais + -ado",
            ],
            example: "Ya había hablado con ella antes. ⏪",
            translation: "I had already spoken with her before. ⏪",
          },
          ER: {
            endings: [
              "había + -ido",
              "habías + -ido",
              "había + -ido",
              "habíamos + -ido",
              "habían + -ido",
              "habíais + -ido",
            ],
            example: "Había comido antes de salir. 🚶‍♂️",
            translation: "I had eaten before leaving. 🚶‍♂️",
          },
          IR: {
            endings: [
              "había + -ido",
              "habías + -ido",
              "había + -ido",
              "habíamos + -ido",
              "habían + -ido",
              "habíais + -ido",
            ],
            example: "Habíamos vivido allí antes. 🏚️",
            translation: "We had lived there before. 🏚️",
          },
        },
        "subjuntivo-presente": {
          title: "Subjuntivo Presente",
          AR: {
            endings: ["e", "es", "e", "emos", "en", "éis"],
            example: "Espero que hables con sinceridad. 💯",
            translation: "I hope you speak with sincerity. 💯",
          },
          ER: {
            endings: ["a", "as", "a", "amos", "an", "áis"],
            example: "Dudo que coma tanto. 🤷‍♂️",
            translation: "I doubt he eats that much. 🤷‍♂️",
          },
          IR: {
            endings: ["a", "as", "a", "amos", "an", "áis"],
            example: "Es posible que vivan aquí. 🤔",
            translation: "It's possible they live here. 🤔",
          },
        },
        "subjuntivo-imperfecto": {
          title: "Pretérito Imperfecto del Subjuntivo",
          AR: {
            endings: [
              "ara (ase)",
              "aras (ases)",
              "ara (ase)",
              "áramos (ásemos)",
              "aran (asen)",
              "arais (aseis)",
            ],
            example: "Si hablara más, lo entendería. 💡",
            translation: "If I spoke more, I would understand it. 💡",
            note: "Las terminaciones con -ara son las principales. Las terminaciones con -ase son menos usadas.",
          },
          ER: {
            endings: [
              "iera (iese)",
              "ieras (ieses)",
              "iera (iese)",
              "iéramos (iésemos)",
              "ieran (iesen)",
              "ierais (ieseis)",
            ],
            example: "Ojalá comiera más sano. 🥗",
            translation: "I wish I ate healthier. 🥗",
            note: "Las terminaciones con -iera son las principales. Las terminaciones con -iese son menos usadas.",
          },
          IR: {
            endings: [
              "iera (iese)",
              "ieras (ieses)",
              "iera (iese)",
              "iéramos (iésemos)",
              "ieran (iesen)",
              "ierais (ieseis)",
            ],
            example: "Como si viviera en otro mundo. 🌍",
            translation: "As if I lived in another world. 🌍",
            note: "Las terminaciones con -iera son las principales. Las terminaciones con -iese son menos usadas.",
          },
        },
        "imperativo-negativo": {
          title: "Imperativo Negativo",
          AR: {
            endings: ["-es", "-e", "-emos", "-en", "-éis"],
            example: "¡No hables tan alto! (tú) 🔊",
            translation: "Don't speak so loudly! 🔊",
          },
          ER: {
            endings: ["-as", "-a", "-amos", "-an", "-áis"],
            example: "¡No comas tan rápido! (tú) ⚡",
            translation: "Don't eat so fast! ⚡",
          },
          IR: {
            endings: ["-as", "-a", "-amos", "-an", "-áis"],
            example: "¡No vivas en el pasado! (tú) ⏰",
            translation: "Don't live in the past! ⏰",
          },
        },
      };

      let currentVerb = "";
      let currentType = "AR";

      function toggleLevel(level) {
        const content = document.getElementById(level + "Content");
        const arrow = document.getElementById(level + "Arrow");

        if (content.classList.contains("hidden")) {
          content.classList.remove("hidden");
          content.classList.add("slide-in");
          arrow.style.transform = "rotate(180deg)";
        } else {
          content.classList.add("hidden");
          arrow.style.transform = "rotate(0deg)";
        }
      }

      function openVerbModal(verbId, title, level) {
        currentVerb = verbId;
        currentType = "AR";
        document.getElementById("modalTitle").textContent = title;
        document.getElementById("verbModal").classList.remove("hidden");
        showConjugation("AR");
      }

      function closeModal() {
        document.getElementById("verbModal").classList.add("hidden");
      }

      function showConjugation(type) {
        currentType = type;

        // Update navigation buttons
        document.querySelectorAll('[id^="nav"]').forEach((btn) => {
          btn.className =
            "px-6 py-3 rounded-xl bg-gray-200 text-gray-600 font-bold transition-all duration-200 hover:bg-gray-300";
        });

        const colors = {
          AR: "bg-gradient-to-r from-red-500 to-red-600 text-white shadow-lg transform hover:scale-105",
          ER: "bg-gradient-to-r from-green-500 to-green-600 text-white shadow-lg transform hover:scale-105",
          IR: "bg-gradient-to-r from-blue-500 to-blue-600 text-white shadow-lg transform hover:scale-105",
        };

        document.getElementById(
          `nav${type}`
        ).className = `px-6 py-3 rounded-xl ${colors[type]} font-bold transition-all duration-200`;

        const data = verbData[currentVerb][type];
        // Special handling for imperative tenses - only certain pronouns exist
        const isImperative =
          currentVerb === "imperativo-positivo" ||
          currentVerb === "imperativo-negativo";
        const pronouns = isImperative
          ? [
              "tú",
              "usted",
              "nosotros/as",
              "ustedes",
              'vosotros/as <span class="text-xs bg-red-100 text-red-700 px-2 py-1 rounded-full font-medium">only used in Spain</span>',
            ]
          : [
              "yo",
              "tú",
              "él/ella/usted",
              "nosotros/as",
              "ellos/ellas/ustedes",
              'vosotros/as <span class="text-xs bg-red-100 text-red-700 px-2 py-1 rounded-full font-medium">only used in Spain</span>',
            ];
        const bgColors = {
          AR: "from-red-400 to-red-600",
          ER: "from-green-400 to-green-600",
          IR: "from-blue-400 to-blue-600",
        };
        const textColors = {
          AR: "text-red-800",
          ER: "text-green-800",
          IR: "text-blue-800",
        };

        let content = `
                <div class="slide-in space-y-8">
                    <!-- Header Section -->
                    <div class="text-center">
                        <div class="inline-flex items-center bg-gradient-to-r ${
                          bgColors[type]
                        } text-white px-8 py-4 rounded-2xl shadow-xl">
                            <span class="text-3xl mr-4">${
                              type === "AR" ? "🔴" : type === "ER" ? "🟢" : "🔵"
                            }</span>
                            <h3 class="text-2xl font-bold">Verbos -${type}</h3>
                        </div>
                    </div>

                    <!-- Conjugation Cards -->
                    <div class="bg-gradient-to-br from-gray-50 to-gray-100 rounded-3xl p-8 shadow-xl border-2 border-gray-200">
                        <h4 class="text-2xl font-bold ${
                          textColors[type]
                        } mb-6 text-center flex items-center justify-center">
                            <span class="text-3xl mr-3">📚</span>
                            Terminaciones
                        </h4>
                        ${
                          currentVerb === "imperativo-negativo"
                            ? `
                        <div class="bg-yellow-100 border-2 border-yellow-300 rounded-2xl p-4 mb-6">
                            <div class="flex items-center justify-center space-x-3">
                                <span class="text-2xl">⚠️</span>
                                <p class="text-lg font-bold text-yellow-800 text-center">
                                    Remember: Always add "No" before the conjugated verb
                                </p>
                            </div>
                            <p class="text-center text-yellow-700 font-semibold mt-2">
                                Example: "No" + ending = "No hables", "No comas", "No vivas"
                            </p>
                        </div>
                        `
                            : ""
                        }
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            ${pronouns
                              .map((pronoun, index) => {
                                return `
                                <div class="bg-white rounded-2xl p-6 shadow-lg border-l-4 border-${
                                  type === "AR"
                                    ? "red"
                                    : type === "ER"
                                    ? "green"
                                    : "blue"
                                }-500 hover:shadow-xl transition-all duration-300 transform hover:scale-105">
                                    <div class="flex justify-between items-center">
                                        <span class="font-bold text-gray-700 text-lg">${pronoun}</span>
                                        <span class="font-black text-2xl ${
                                          type === "AR"
                                            ? "text-red-600"
                                            : type === "ER"
                                            ? "text-green-600"
                                            : "text-blue-600"
                                        } bg-${
                                  type === "AR"
                                    ? "red"
                                    : type === "ER"
                                    ? "green"
                                    : "blue"
                                }-50 px-4 py-2 rounded-xl">
                                            ${data.endings[index]}
                                        </span>
                                    </div>
                                </div>
                            `;
                              })
                              .join("")}
                        </div>
                    </div>
                    
                    <!-- Example Section -->
                    <div class="bg-gradient-to-br from-yellow-50 to-orange-100 rounded-3xl p-8 shadow-xl border-2 border-yellow-200">
                        <h4 class="text-2xl font-bold text-orange-800 mb-6 text-center flex items-center justify-center">
                            <span class="text-3xl mr-3">💡</span>
                            Ejemplo en Contexto
                        </h4>
                        <div class="bg-white rounded-2xl p-6 shadow-lg">
                            <div class="space-y-4">
                                <div class="flex items-start space-x-4">
                                    <span class="text-2xl">🇪🇸</span>
                                    <p class="text-xl text-gray-800 font-bold leading-relaxed">${
                                      data.example
                                    }</p>
                                </div>
                                <div class="flex items-start space-x-4">
                                    <span class="text-2xl">🇺🇸</span>
                                    <p class="text-lg text-gray-600 italic leading-relaxed">${
                                      data.translation
                                    }</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    ${
                      data.note
                        ? `
                    <!-- Important Note Section -->
                    <div class="bg-gradient-to-br from-blue-50 to-indigo-100 rounded-3xl p-8 shadow-xl border-2 border-blue-200">
                        <h4 class="text-2xl font-bold text-blue-800 mb-6 text-center flex items-center justify-center">
                            <span class="text-3xl mr-3">📝</span>
                            Nota Importante
                        </h4>
                        <div class="bg-white rounded-2xl p-6 shadow-lg">
                            <p class="text-lg text-blue-800 font-semibold leading-relaxed text-center">
                                ${data.note}
                            </p>
                        </div>
                    </div>
                    `
                        : ""
                    }
                </div>
            `;

        document.getElementById("conjugationContent").innerHTML = content;
      }

      function showComparison() {
        // Update navigation
        document.querySelectorAll('[id^="nav"]').forEach((btn) => {
          btn.className =
            "px-6 py-3 rounded-xl bg-gray-200 text-gray-600 font-bold transition-all duration-200 hover:bg-gray-300";
        });
        document.getElementById("navComparison").className =
          "px-6 py-3 rounded-xl bg-gradient-to-r from-indigo-500 to-purple-600 text-white shadow-lg transform hover:scale-105 font-bold transition-all duration-200";

        // Special handling for imperative tenses - only certain pronouns exist
        const isImperative =
          currentVerb === "imperativo-positivo" ||
          currentVerb === "imperativo-negativo";
        const pronouns = isImperative
          ? [
              "tú",
              "usted",
              "nosotros/as",
              "ustedes",
              'vosotros/as <span class="text-xs bg-red-100 text-red-700 px-2 py-1 rounded-full font-medium">only used in Spain</span>',
            ]
          : [
              "yo",
              "tú",
              "él/ella/usted",
              "nosotros/as",
              "ellos/ellas/ustedes",
              'vosotros/as <span class="text-xs bg-red-100 text-red-700 px-2 py-1 rounded-full font-medium">only used in Spain</span>',
            ];
        const arData = verbData[currentVerb]["AR"];
        const erData = verbData[currentVerb]["ER"];
        const irData = verbData[currentVerb]["IR"];

        let content = `
                <div class="slide-in space-y-8">
                    <!-- Header Section -->
                    <div class="text-center">
                        <div class="inline-flex items-center bg-gradient-to-r from-indigo-500 to-purple-600 text-white px-8 py-4 rounded-2xl shadow-xl">
                            <span class="text-3xl mr-4">🔄</span>
                            <h3 class="text-2xl font-bold">Comparación de Terminaciones</h3>
                        </div>
                    </div>

                    <!-- Comparison Table -->
                    <div class="bg-gradient-to-br from-gray-50 to-gray-100 rounded-3xl p-8 shadow-xl border-2 border-gray-200">
                        <div class="overflow-x-auto">
                            <table class="w-full">
                                <thead>
                                    <tr class="border-b-4 border-gray-300">
                                        <th class="text-left py-4 px-6 font-bold text-gray-800 text-lg">Pronombre</th>
                                        <th class="text-center py-4 px-6 font-bold text-white bg-gradient-to-r from-red-500 to-red-600 rounded-t-2xl shadow-lg">-AR</th>
                                        <th class="text-center py-4 px-6 font-bold text-white bg-gradient-to-r from-green-500 to-green-600 rounded-t-2xl shadow-lg mx-2">-ER</th>
                                        <th class="text-center py-4 px-6 font-bold text-white bg-gradient-to-r from-blue-500 to-blue-600 rounded-t-2xl shadow-lg">-IR</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    ${pronouns
                                      .map((pronoun, index) => {
                                        return `
                                        <tr class="border-b-2 border-gray-200 hover:bg-gray-50 transition-colors duration-200">
                                            <td class="py-4 px-6 font-bold text-gray-800 text-lg">${pronoun}</td>
                                            <td class="py-4 px-6 text-center">
                                                <span class="font-black text-xl text-red-600 bg-red-100 px-4 py-2 rounded-xl shadow-md">
                                                    ${arData.endings[index]}
                                                </span>
                                            </td>
                                            <td class="py-4 px-6 text-center">
                                                <span class="font-black text-xl text-green-600 bg-green-100 px-4 py-2 rounded-xl shadow-md">
                                                    ${erData.endings[index]}
                                                </span>
                                            </td>
                                            <td class="py-4 px-6 text-center">
                                                <span class="font-black text-xl text-blue-600 bg-blue-100 px-4 py-2 rounded-xl shadow-md">
                                                    ${irData.endings[index]}
                                                </span>
                                            </td>
                                        </tr>
                                    `;
                                      })
                                      .join("")}
                                </tbody>
                            </table>
                        </div>
                    </div>
                    
                    <!-- Examples Section -->
                    <div class="grid md:grid-cols-3 gap-6">
                        <div class="bg-gradient-to-br from-red-100 to-red-200 rounded-3xl p-6 shadow-xl border-2 border-red-300 transform hover:scale-105 transition-all duration-300">
                            <div class="text-center mb-4">
                                <div class="inline-flex items-center bg-gradient-to-r from-red-500 to-red-600 text-white px-4 py-2 rounded-xl shadow-lg">
                                    <span class="text-2xl mr-2">🔴</span>
                                    <h4 class="font-bold text-lg">Verbos -AR</h4>
                                </div>
                            </div>
                            <div class="bg-white rounded-2xl p-4 shadow-lg">
                                <div class="space-y-3">
                                    <div class="flex items-start space-x-3">
                                        <span class="text-xl">🇪🇸</span>
                                        <p class="text-red-800 font-bold">${
                                          arData.example
                                        }</p>
                                    </div>
                                    <div class="flex items-start space-x-3">
                                        <span class="text-xl">🇺🇸</span>
                                        <p class="text-red-600 italic">${
                                          arData.translation
                                        }</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="bg-gradient-to-br from-green-100 to-green-200 rounded-3xl p-6 shadow-xl border-2 border-green-300 transform hover:scale-105 transition-all duration-300">
                            <div class="text-center mb-4">
                                <div class="inline-flex items-center bg-gradient-to-r from-green-500 to-green-600 text-white px-4 py-2 rounded-xl shadow-lg">
                                    <span class="text-2xl mr-2">🟢</span>
                                    <h4 class="font-bold text-lg">Verbos -ER</h4>
                                </div>
                            </div>
                            <div class="bg-white rounded-2xl p-4 shadow-lg">
                                <div class="space-y-3">
                                    <div class="flex items-start space-x-3">
                                        <span class="text-xl">🇪🇸</span>
                                        <p class="text-green-800 font-bold">${
                                          erData.example
                                        }</p>
                                    </div>
                                    <div class="flex items-start space-x-3">
                                        <span class="text-xl">🇺🇸</span>
                                        <p class="text-green-600 italic">${
                                          erData.translation
                                        }</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="bg-gradient-to-br from-blue-100 to-blue-200 rounded-3xl p-6 shadow-xl border-2 border-blue-300 transform hover:scale-105 transition-all duration-300">
                            <div class="text-center mb-4">
                                <div class="inline-flex items-center bg-gradient-to-r from-blue-500 to-blue-600 text-white px-4 py-2 rounded-xl shadow-lg">
                                    <span class="text-2xl mr-2">🔵</span>
                                    <h4 class="font-bold text-lg">Verbos -IR</h4>
                                </div>
                            </div>
                            <div class="bg-white rounded-2xl p-4 shadow-lg">
                                <div class="space-y-3">
                                    <div class="flex items-start space-x-3">
                                        <span class="text-xl">🇪🇸</span>
                                        <p class="text-blue-800 font-bold">${
                                          irData.example
                                        }</p>
                                    </div>
                                    <div class="flex items-start space-x-3">
                                        <span class="text-xl">🇺🇸</span>
                                        <p class="text-blue-600 italic">${
                                          irData.translation
                                        }</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;

        document.getElementById("conjugationContent").innerHTML = content;
      }

      let currentPracticeQuestion = 0;
      let practiceScore = 0;
      let practiceQuestions = [];

      function generatePracticeQuestions() {
        const data = verbData[currentVerb];
        const pronouns = [
          "yo",
          "tú",
          "él/ella/usted",
          "nosotros/as",
          "ellos/ellas/ustedes",
          "vosotros/as",
        ];
        const types = ["AR", "ER", "IR"];

        // Helper function to conjugate verbs based on tense and type
        function conjugateVerb(verb, type, pronoun, tense) {
          const root = verb.slice(0, -2); // Remove -ar, -er, -ir
          const pronounIndex = pronouns.indexOf(pronoun);

          // Get the ending pattern for this tense and type
          const endings = data[type].endings[pronounIndex];

          // Handle special cases for compound tenses
          if (tense === "presente-continuo") {
            const gerundEnding = type === "AR" ? "ando" : "iendo";
            const estarForms = [
              "estoy",
              "estás",
              "está",
              "estamos",
              "están",
              "estáis",
            ];
            return `${estarForms[pronounIndex]} ${root}${gerundEnding}`;
          } else if (tense === "presente-perfecto") {
            const participleEnding = type === "AR" ? "ado" : "ido";
            const haberForms = ["he", "has", "ha", "hemos", "han", "habéis"];
            return `${haberForms[pronounIndex]} ${root}${participleEnding}`;
          } else if (tense === "pasado-continuo") {
            const gerundEnding = type === "AR" ? "ando" : "iendo";
            const estabaForms = [
              "estaba",
              "estabas",
              "estaba",
              "estábamos",
              "estaban",
              "estabais",
            ];
            return `${estabaForms[pronounIndex]} ${root}${gerundEnding}`;
          } else if (tense === "preterito-pluscuamperfecto") {
            const participleEnding = type === "AR" ? "ado" : "ido";
            const habiaForms = [
              "había",
              "habías",
              "había",
              "habíamos",
              "habían",
              "habíais",
            ];
            return `${habiaForms[pronounIndex]} ${root}${participleEnding}`;
          } else if (tense === "futuro-ir-a") {
            const irForms = [
              "voy a",
              "vas a",
              "va a",
              "vamos a",
              "van a",
              "vais a",
            ];
            return `${irForms[pronounIndex]} ${verb}`;
          } else if (tense === "condicional-simple") {
            return `${root}${endings}`;
          } else if (tense === "imperativo-positivo") {
            if (pronounIndex === 0) return "—"; // No imperative for "yo"
            // For imperativo positivo, we need to handle each form specifically
            const imperativeEndings = {
              AR: ["—", "a", "e", "emos", "en", "ad"],
              ER: ["—", "e", "a", "amos", "an", "ed"],
              IR: ["—", "e", "a", "amos", "an", "id"],
            };
            return `${root}${imperativeEndings[type][pronounIndex]}`;
          } else if (tense === "imperativo-negativo") {
            if (pronounIndex === 0) return "—"; // No imperative for "yo"
            // For imperativo negativo, we use subjunctive forms with "no"
            const negativeEndings = {
              AR: ["—", "es", "e", "emos", "en", "éis"],
              ER: ["—", "as", "a", "amos", "an", "áis"],
              IR: ["—", "as", "a", "amos", "an", "áis"],
            };
            if (pronounIndex === 0) return "—";
            return `no ${root}${negativeEndings[type][pronounIndex]}`;
          } else {
            // Simple tenses
            return `${root}${endings}`;
          }
        }

        // Context sentences for each verb type and tense
        const contextSentences = {
          "presente-simple": {
            AR: [
              {
                sentence: "Yo _ español con mis amigos",
                verb: "hablar",
                translation: "I speak Spanish with my friends",
              },
              {
                sentence: "Tú _ matemáticas en la universidad",
                verb: "estudiar",
                translation: "You study mathematics at the university",
              },
              {
                sentence: "Él _ al trabajo todos los días",
                verb: "caminar",
                translation: "He walks to work every day",
              },
              {
                sentence: "Nosotros _ salsa los viernes",
                verb: "bailar",
                translation: "We dance salsa on Fridays",
              },
              {
                sentence: "Ellos _ cena para la familia",
                verb: "cocinar",
                translation: "They cook dinner for the family",
              },
              {
                sentence: "Vosotros _ en el coro de la iglesia",
                verb: "cantar",
                translation: "You all sing in the church choir",
              },
            ],
            ER: [
              {
                sentence: "Yo _ frutas en el desayuno",
                verb: "comer",
                translation: "I eat fruits for breakfast",
              },
              {
                sentence: "Tú _ novelas de aventura",
                verb: "leer",
                translation: "You read adventure novels",
              },
              {
                sentence: "Ella _ café por las mañanas",
                verb: "beber",
                translation: "She drinks coffee in the mornings",
              },
              {
                sentence: "Nosotros _ en el parque",
                verb: "correr",
                translation: "We run in the park",
              },
              {
                sentence: "Ellos _ productos orgánicos",
                verb: "vender",
                translation: "They sell organic products",
              },
              {
                sentence: "Vosotros _ italiano juntos",
                verb: "aprender",
                translation: "You all learn Italian together",
              },
            ],
            IR: [
              {
                sentence: "Yo _ en una casa pequeña",
                verb: "vivir",
                translation: "I live in a small house",
              },
              {
                sentence: "Tú _ cartas a tu abuela",
                verb: "escribir",
                translation: "You write letters to your grandmother",
              },
              {
                sentence: "Él _ visitas los domingos",
                verb: "recibir",
                translation: "He receives visits on Sundays",
              },
              {
                sentence: "Nosotros _ las escaleras corriendo",
                verb: "subir",
                translation: "We go up the stairs running",
              },
              {
                sentence: "Ellas _ viajar a Europa",
                verb: "decidir",
                translation: "They decide to travel to Europe",
              },
              {
                sentence: "Vosotros _ temprano mañana",
                verb: "partir",
                translation: "You all leave early tomorrow",
              },
            ],
          },
          "imperativo-positivo": {
            AR: [
              {
                sentence: "¡_ más despacio, por favor! (tú)",
                verb: "hablar",
                translation: "Speak more slowly, please!",
              },
              {
                sentence: "¡_ para el examen! (usted)",
                verb: "estudiar",
                translation: "Study for the exam!",
              },
              {
                sentence: "¡_ hasta la esquina! (tú)",
                verb: "caminar",
                translation: "Walk to the corner!",
              },
              {
                sentence: "¡_ conmigo! (nosotros)",
                verb: "bailar",
                translation: "Dance with me!",
              },
              {
                sentence: "¡_ algo delicioso! (ustedes)",
                verb: "cocinar",
                translation: "Cook something delicious!",
              },
              {
                sentence: "¡_ esa canción! (vosotros)",
                verb: "cantar",
                translation: "Sing that song!",
              },
            ],
            ER: [
              {
                sentence: "¡_ todas las verduras! (tú)",
                verb: "comer",
                translation: "Eat all the vegetables!",
              },
              {
                sentence: "¡_ este libro! (usted)",
                verb: "leer",
                translation: "Read this book!",
              },
              {
                sentence: "¡_ más agua! (tú)",
                verb: "beber",
                translation: "Drink more water!",
              },
              {
                sentence: "¡_ más rápido! (nosotros)",
                verb: "correr",
                translation: "Run faster!",
              },
              {
                sentence: "¡_ estos productos! (ustedes)",
                verb: "vender",
                translation: "Sell these products!",
              },
              {
                sentence: "¡_ la lección! (vosotros)",
                verb: "aprender",
                translation: "Learn the lesson!",
              },
            ],
            IR: [
              {
                sentence: "¡_ la vida al máximo! (tú)",
                verb: "vivir",
                translation: "Live life to the fullest!",
              },
              {
                sentence: "¡_ tu nombre aquí! (usted)",
                verb: "escribir",
                translation: "Write your name here!",
              },
              {
                sentence: "¡_ este regalo! (tú)",
                verb: "recibir",
                translation: "Receive this gift!",
              },
              {
                sentence: "¡_ las escaleras! (nosotros)",
                verb: "subir",
                translation: "Go up the stairs!",
              },
              {
                sentence: "¡_ ahora mismo! (ustedes)",
                verb: "decidir",
                translation: "Decide right now!",
              },
              {
                sentence: "¡_ inmediatamente! (vosotros)",
                verb: "partir",
                translation: "Leave immediately!",
              },
            ],
          },
          "imperativo-negativo": {
            AR: [
              {
                sentence: "¡_ tan alto! (tú)",
                verb: "hablar",
                translation: "Don't speak so loudly!",
              },
              {
                sentence: "¡_ hasta tan tarde! (usted)",
                verb: "estudiar",
                translation: "Don't study until so late!",
              },
              {
                sentence: "¡_ solo por la noche! (tú)",
                verb: "caminar",
                translation: "Don't walk alone at night!",
              },
              {
                sentence: "¡_ en la mesa! (nosotros)",
                verb: "bailar",
                translation: "Don't dance on the table!",
              },
              {
                sentence: "¡_ con tanto aceite! (ustedes)",
                verb: "cocinar",
                translation: "Don't cook with so much oil!",
              },
              {
                sentence: "¡_ tan fuerte! (vosotros)",
                verb: "cantar",
                translation: "Don't sing so loudly!",
              },
            ],
            ER: [
              {
                sentence: "¡_ tan rápido! (tú)",
                verb: "comer",
                translation: "Don't eat so fast!",
              },
              {
                sentence: "¡_ en la oscuridad! (usted)",
                verb: "leer",
                translation: "Don't read in the dark!",
              },
              {
                sentence: "¡_ agua fría! (tú)",
                verb: "beber",
                translation: "Don't drink cold water!",
              },
              {
                sentence: "¡_ bajo la lluvia! (nosotros)",
                verb: "correr",
                translation: "Don't run in the rain!",
              },
              {
                sentence: "¡_ productos vencidos! (ustedes)",
                verb: "vender",
                translation: "Don't sell expired products!",
              },
              {
                sentence: "¡_ tan tarde! (vosotros)",
                verb: "aprender",
                translation: "Don't learn so late!",
              },
            ],
            IR: [
              {
                sentence: "¡_ en el pasado! (tú)",
                verb: "vivir",
                translation: "Don't live in the past!",
              },
              {
                sentence: "¡_ con lápiz! (usted)",
                verb: "escribir",
                translation: "Don't write with pencil!",
              },
              {
                sentence: "¡_ regalos de extraños! (tú)",
                verb: "recibir",
                translation: "Don't receive gifts from strangers!",
              },
              {
                sentence: "¡_ corriendo! (nosotros)",
                verb: "subir",
                translation: "Don't go up running!",
              },
              {
                sentence: "¡_ sin pensar! (ustedes)",
                verb: "decidir",
                translation: "Don't decide without thinking!",
              },
              {
                sentence: "¡_ sin despedirte! (vosotros)",
                verb: "partir",
                translation: "Don't leave without saying goodbye!",
              },
            ],
          },
          "presente-continuo": {
            AR: [
              {
                sentence: "Yo _ por teléfono ahora",
                verb: "hablar",
                translation: "I am talking on the phone now",
              },
              {
                sentence: "Tú _ para el examen",
                verb: "estudiar",
                translation: "You are studying for the exam",
              },
              {
                sentence: "Él _ hacia la oficina",
                verb: "caminar",
                translation: "He is walking towards the office",
              },
              {
                sentence: "Nosotros _ en la fiesta",
                verb: "bailar",
                translation: "We are dancing at the party",
              },
              {
                sentence: "Ellos _ algo delicioso",
                verb: "cocinar",
                translation: "They are cooking something delicious",
              },
              {
                sentence: "Vosotros _ muy bien",
                verb: "cantar",
                translation: "You all are singing very well",
              },
            ],
            ER: [
              {
                sentence: "Yo _ mi almuerzo favorito",
                verb: "comer",
                translation: "I am eating my favorite lunch",
              },
              {
                sentence: "Tú _ un libro interesante",
                verb: "leer",
                translation: "You are reading an interesting book",
              },
              {
                sentence: "Ella _ té caliente",
                verb: "beber",
                translation: "She is drinking hot tea",
              },
              {
                sentence: "Nosotros _ una maratón",
                verb: "correr",
                translation: "We are running a marathon",
              },
              {
                sentence: "Ellos _ sus productos",
                verb: "vender",
                translation: "They are selling their products",
              },
              {
                sentence: "Vosotros _ rápidamente",
                verb: "aprender",
                translation: "You all are learning quickly",
              },
            ],
            IR: [
              {
                sentence: "Yo _ una experiencia única",
                verb: "vivir",
                translation: "I am living a unique experience",
              },
              {
                sentence: "Tú _ tu tesis",
                verb: "escribir",
                translation: "You are writing your thesis",
              },
              {
                sentence: "Él _ muchos mensajes",
                verb: "recibir",
                translation: "He is receiving many messages",
              },
              {
                sentence: "Nosotros _ la montaña",
                verb: "subir",
                translation: "We are climbing the mountain",
              },
              {
                sentence: "Ellas _ su futuro",
                verb: "decidir",
                translation: "They are deciding their future",
              },
              {
                sentence: "Vosotros _ en este momento",
                verb: "partir",
                translation: "You all are leaving right now",
              },
            ],
          },
          "preterito-indefinido": {
            AR: [
              {
                sentence: "Ayer yo _ con el director",
                verb: "hablar",
                translation: "Yesterday I spoke with the director",
              },
              {
                sentence: "Tú _ toda la noche",
                verb: "estudiar",
                translation: "You studied all night",
              },
              {
                sentence: "Él _ hasta su casa",
                verb: "caminar",
                translation: "He walked to his house",
              },
              {
                sentence: "Nosotros _ hasta muy tarde",
                verb: "bailar",
                translation: "We danced until very late",
              },
              {
                sentence: "Ellos _ para 20 personas",
                verb: "cocinar",
                translation: "They cooked for 20 people",
              },
              {
                sentence: "Vosotros _ en el concierto",
                verb: "cantar",
                translation: "You all sang at the concert",
              },
            ],
            ER: [
              {
                sentence: "Yo _ pizza anoche",
                verb: "comer",
                translation: "I ate pizza last night",
              },
              {
                sentence: "Tú _ tres libros este mes",
                verb: "leer",
                translation: "You read three books this month",
              },
              {
                sentence: "Ella _ agua después del ejercicio",
                verb: "beber",
                translation: "She drank water after exercising",
              },
              {
                sentence: "Nosotros _ 10 kilómetros ayer",
                verb: "correr",
                translation: "We ran 10 kilometers yesterday",
              },
              {
                sentence: "Ellos _ su coche viejo",
                verb: "vender",
                translation: "They sold their old car",
              },
              {
                sentence: "Vosotros _ mucho en clase",
                verb: "aprender",
                translation: "You all learned a lot in class",
              },
            ],
            IR: [
              {
                sentence: "Yo _ en París durante un año",
                verb: "vivir",
                translation: "I lived in Paris for a year",
              },
              {
                sentence: "Tú _ una carta hermosa",
                verb: "escribir",
                translation: "You wrote a beautiful letter",
              },
              {
                sentence: "Él _ una sorpresa ayer",
                verb: "recibir",
                translation: "He received a surprise yesterday",
              },
              {
                sentence: "Nosotros _ al último piso",
                verb: "subir",
                translation: "We went up to the top floor",
              },
              {
                sentence: "Ellas _ mudarse a otra ciudad",
                verb: "decidir",
                translation: "They decided to move to another city",
              },
              {
                sentence: "Vosotros _ muy temprano",
                verb: "partir",
                translation: "You all left very early",
              },
            ],
          },
          "preterito-imperfecto": {
            AR: [
              {
                sentence: "Cuando era niño, yo _ mucho",
                verb: "hablar",
                translation: "When I was a child, I used to talk a lot",
              },
              {
                sentence: "Tú siempre _ en la biblioteca",
                verb: "estudiar",
                translation: "You always used to study in the library",
              },
              {
                sentence: "Él _ al colegio todos los días",
                verb: "caminar",
                translation: "He used to walk to school every day",
              },
              {
                sentence: "Nosotros _ en todas las fiestas",
                verb: "bailar",
                translation: "We used to dance at all parties",
              },
              {
                sentence: "Ellos _ los domingos",
                verb: "cocinar",
                translation: "They used to cook on Sundays",
              },
              {
                sentence: "Vosotros _ en el coro",
                verb: "cantar",
                translation: "You all used to sing in the choir",
              },
            ],
            ER: [
              {
                sentence: "Yo _ verduras cuando era pequeño",
                verb: "comer",
                translation: "I used to eat vegetables when I was little",
              },
              {
                sentence: "Tú _ cuentos antes de dormir",
                verb: "leer",
                translation: "You used to read stories before sleeping",
              },
              {
                sentence: "Ella _ leche todas las mañanas",
                verb: "beber",
                translation: "She used to drink milk every morning",
              },
              {
                sentence: "Nosotros _ en el parque",
                verb: "correr",
                translation: "We used to run in the park",
              },
              {
                sentence: "Ellos _ flores en la plaza",
                verb: "vender",
                translation: "They used to sell flowers in the square",
              },
              {
                sentence: "Vosotros _ francés en el colegio",
                verb: "aprender",
                translation: "You all used to learn French at school",
              },
            ],
            IR: [
              {
                sentence: "Yo _ con mis abuelos",
                verb: "vivir",
                translation: "I used to live with my grandparents",
              },
              {
                sentence: "Tú _ en tu diario",
                verb: "escribir",
                translation: "You used to write in your diary",
              },
              {
                sentence: "Él _ cartas de su novia",
                verb: "recibir",
                translation: "He used to receive letters from his girlfriend",
              },
              {
                sentence: "Nosotros _ las escaleras corriendo",
                verb: "subir",
                translation: "We used to go up the stairs running",
              },
              {
                sentence: "Ellas _ todo juntas",
                verb: "decidir",
                translation: "They used to decide everything together",
              },
              {
                sentence: "Vosotros _ de vacaciones",
                verb: "partir",
                translation: "You all used to leave on vacation",
              },
            ],
          },
          "futuro-ir-a": {
            AR: [
              {
                sentence: "Yo _ con el jefe mañana",
                verb: "hablar",
                translation: "I am going to talk with the boss tomorrow",
              },
              {
                sentence: "Tú _ medicina",
                verb: "estudiar",
                translation: "You are going to study medicine",
              },
              {
                sentence: "Él _ hasta la estación",
                verb: "caminar",
                translation: "He is going to walk to the station",
              },
              {
                sentence: "Nosotros _ en la boda",
                verb: "bailar",
                translation: "We are going to dance at the wedding",
              },
              {
                sentence: "Ellos _ para nosotros",
                verb: "cocinar",
                translation: "They are going to cook for us",
              },
              {
                sentence: "Vosotros _ en el festival",
                verb: "cantar",
                translation: "You all are going to sing at the festival",
              },
            ],
            ER: [
              {
                sentence: "Yo _ en ese restaurante",
                verb: "comer",
                translation: "I am going to eat at that restaurant",
              },
              {
                sentence: "Tú _ ese libro famoso",
                verb: "leer",
                translation: "You are going to read that famous book",
              },
              {
                sentence: "Ella _ más agua",
                verb: "beber",
                translation: "She is going to drink more water",
              },
              {
                sentence: "Nosotros _ mañana",
                verb: "correr",
                translation: "We are going to run tomorrow",
              },
              {
                sentence: "Ellos _ su casa",
                verb: "vender",
                translation: "They are going to sell their house",
              },
              {
                sentence: "Vosotros _ alemán",
                verb: "aprender",
                translation: "You all are going to learn German",
              },
            ],
            IR: [
              {
                sentence: "Yo _ en el extranjero",
                verb: "vivir",
                translation: "I am going to live abroad",
              },
              {
                sentence: "Tú _ una novela",
                verb: "escribir",
                translation: "You are going to write a novel",
              },
              {
                sentence: "Él _ una medalla",
                verb: "recibir",
                translation: "He is going to receive a medal",
              },
              {
                sentence: "Nosotros _ en ascensor",
                verb: "subir",
                translation: "We are going to go up in the elevator",
              },
              {
                sentence: "Ellas _ pronto",
                verb: "decidir",
                translation: "They are going to decide soon",
              },
              {
                sentence: "Vosotros _ de viaje",
                verb: "partir",
                translation: "You all are going to leave on a trip",
              },
            ],
          },
        };

        practiceQuestions = [];
        const sentences =
          contextSentences[currentVerb] || contextSentences["presente-simple"];

        // Generate 10 random questions
        for (let i = 0; i < 10; i++) {
          const randomType = types[Math.floor(Math.random() * types.length)];
          const randomPronoun = Math.floor(Math.random() * pronouns.length);
          const pronoun = pronouns[randomPronoun];

          // Get the context sentence
          const contextData = sentences[randomType][randomPronoun];

          // Generate the correct conjugated verb
          const correctAnswer = conjugateVerb(
            contextData.verb,
            randomType,
            pronoun,
            currentVerb
          );

          // Generate wrong answers by conjugating the same verb with different pronouns/types
          const wrongAnswers = [];
          const usedAnswers = new Set([correctAnswer]);

          // Try different combinations to get wrong answers
          while (wrongAnswers.length < 3) {
            const wrongType = types[Math.floor(Math.random() * types.length)];
            const wrongPronoun =
              pronouns[Math.floor(Math.random() * pronouns.length)];
            const wrongAnswer = conjugateVerb(
              contextData.verb,
              wrongType,
              wrongPronoun,
              currentVerb
            );

            if (!usedAnswers.has(wrongAnswer) && wrongAnswer !== "—") {
              wrongAnswers.push(wrongAnswer);
              usedAnswers.add(wrongAnswer);
            }
          }

          // If we don't have enough wrong answers, add some from other verbs
          if (wrongAnswers.length < 3) {
            const otherVerbs = [
              "caminar",
              "estudiar",
              "comer",
              "beber",
              "vivir",
              "escribir",
            ];
            for (const verb of otherVerbs) {
              if (wrongAnswers.length >= 3) break;
              const wrongAnswer = conjugateVerb(
                verb,
                randomType,
                pronoun,
                currentVerb
              );
              if (!usedAnswers.has(wrongAnswer) && wrongAnswer !== "—") {
                wrongAnswers.push(wrongAnswer);
                usedAnswers.add(wrongAnswer);
              }
            }
          }

          // Combine correct answer with wrong answers and shuffle
          const allAnswers = [correctAnswer, ...wrongAnswers.slice(0, 3)].sort(
            () => Math.random() - 0.5
          );

          practiceQuestions.push({
            pronoun: pronoun,
            type: randomType,
            correctAnswer: correctAnswer,
            options: allAnswers,
            contextSentence: contextData.sentence,
            completeSentence: contextData.sentence.replace("_", correctAnswer),
            verb: contextData.verb,
            translation: contextData.translation,
          });
        }
      }

      function showPractice() {
        // Update navigation
        document.querySelectorAll('[id^="nav"]').forEach((btn) => {
          btn.className =
            "px-6 py-3 rounded-xl bg-gray-200 text-gray-600 font-bold transition-all duration-200 hover:bg-gray-300";
        });
        document.getElementById("navPractice").className =
          "px-6 py-3 rounded-xl bg-gradient-to-r from-purple-500 to-pink-600 text-white shadow-lg transform hover:scale-105 font-bold transition-all duration-200";

        generatePracticeQuestions();
        currentPracticeQuestion = 0;
        practiceScore = 0;
        userAnswers = []; // Reset user answers

        showPracticeQuestion();
      }

      function showPracticeQuestion() {
        if (currentPracticeQuestion >= practiceQuestions.length) {
          showPracticeResults();
          return;
        }

        const question = practiceQuestions[currentPracticeQuestion];

        let content = `
                <div class="slide-in space-y-8">
                    <!-- Header Section -->
                    <div class="text-center">
                        <div class="inline-flex items-center bg-gradient-to-r from-purple-500 to-pink-600 text-white px-8 py-4 rounded-2xl shadow-xl">
                            <span class="text-3xl mr-4">🎯</span>
                            <h3 class="text-2xl font-bold">Práctica Interactiva</h3>
                        </div>
                        <div class="mt-4">
                            <span class="bg-gray-200 text-gray-700 px-4 py-2 rounded-full font-bold">
                                Pregunta ${currentPracticeQuestion + 1} de ${
          practiceQuestions.length
        }
                            </span>
                        </div>
                    </div>

                    <!-- Question Section -->
                    <div class="bg-gradient-to-br from-purple-50 to-pink-100 rounded-3xl p-8 shadow-xl border-2 border-purple-200">
                        <div class="text-center mb-8">
                            <h4 class="text-2xl font-bold text-purple-800 mb-6">
                                ¿Cuál es la terminación correcta?
                            </h4>
                            <div class="bg-white rounded-2xl p-8 shadow-lg max-w-2xl mx-auto">
                                <p class="text-2xl md:text-3xl font-bold text-gray-800 leading-relaxed">
                                    ${question.contextSentence.replace(
                                      "_",
                                      '<span class="text-4xl text-purple-800 bg-purple-100 px-3 py-1 rounded-lg">_</span>'
                                    )}
                                </p>
                                <div class="mt-4 flex items-center justify-center space-x-3">
                                    <span class="text-sm font-semibold text-gray-600 bg-gray-100 px-3 py-1 rounded-full">${
                                      question.verb
                                    }</span>
                                    <span class="text-sm font-semibold text-purple-600 bg-purple-100 px-3 py-1 rounded-full">${
                                      verbData[currentVerb].title
                                    }</span>
                                </div>
                                <div class="mt-3 text-center">
                                    <p class="text-sm text-gray-500 italic">${
                                      question.translation
                                    }</p>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Answer Options -->
                        <div class="grid grid-cols-2 gap-4">
                            ${question.options
                              .map((option, index) => {
                                const userAnswer =
                                  userAnswers[currentPracticeQuestion];
                                let buttonClass =
                                  "bg-white hover:bg-purple-50 border-2 border-purple-200 hover:border-purple-400 rounded-2xl p-6 shadow-lg transition-all duration-300 transform hover:scale-105 hover:shadow-xl";
                                let disabled = "";

                                if (userAnswer) {
                                  disabled = "disabled";
                                  if (option === userAnswer.correct) {
                                    buttonClass =
                                      "bg-green-500 text-white border-2 border-green-600 rounded-2xl p-6 shadow-lg transform scale-105";
                                  } else if (
                                    option === userAnswer.selected &&
                                    !userAnswer.isCorrect
                                  ) {
                                    buttonClass =
                                      "bg-red-500 text-white border-2 border-red-600 rounded-2xl p-6 shadow-lg";
                                  } else {
                                    buttonClass =
                                      "bg-blue-50 text-blue-400 border-2 border-blue-200 rounded-2xl p-6 shadow-lg opacity-60";
                                  }
                                }

                                return `
                                <button onclick="checkAnswer('${option}', '${
                                  question.correctAnswer
                                }')" 
                                        ${disabled}
                                        class="${buttonClass}">
                                    <span class="text-2xl font-bold ${
                                      userAnswer ? "" : "text-purple-700"
                                    }">${option}</span>
                                </button>
                            `;
                              })
                              .join("")}
                        </div>
                    </div>

                    <!-- Show feedback if question was already answered -->
                    ${
                      userAnswers[currentPracticeQuestion]
                        ? `
                    <div class="feedback-section mt-6 p-6 rounded-2xl shadow-lg transition-all duration-500 ${
                      userAnswers[currentPracticeQuestion].isCorrect
                        ? "bg-green-100 border-2 border-green-300"
                        : "bg-red-100 border-2 border-red-300"
                    }">
                        <div class="text-center">
                            <div class="text-3xl mb-3">${
                              userAnswers[currentPracticeQuestion].isCorrect
                                ? "🎉"
                                : "💪"
                            }</div>
                            <h5 class="text-xl font-bold ${
                              userAnswers[currentPracticeQuestion].isCorrect
                                ? "text-green-800"
                                : "text-red-800"
                            } mb-3">
                                ${
                                  userAnswers[currentPracticeQuestion].isCorrect
                                    ? "¡Correcto!"
                                    : "¡Sigue intentando!"
                                }
                            </h5>
                            ${
                              !userAnswers[currentPracticeQuestion].isCorrect
                                ? `
                            <p class="text-lg text-red-700 font-semibold mb-2">
                                La respuesta correcta es:
                            </p>
                            `
                                : ""
                            }
                            <p class="text-lg ${
                              userAnswers[currentPracticeQuestion].isCorrect
                                ? "text-green-700"
                                : "text-green-700"
                            } font-bold">
                                ${question.completeSentence}
                            </p>
                        </div>
                    </div>
                    `
                        : ""
                    }

                    <!-- Navigation Buttons -->
                    <div class="flex justify-between items-center">
                        <button onclick="previousQuestion()" 
                                ${
                                  currentPracticeQuestion === 0
                                    ? "disabled"
                                    : ""
                                }
                                class="flex items-center space-x-2 px-6 py-3 rounded-2xl font-bold transition-all duration-300 ${
                                  currentPracticeQuestion === 0
                                    ? "bg-gray-200 text-gray-400 cursor-not-allowed"
                                    : "bg-gradient-to-r from-blue-500 to-indigo-600 text-white shadow-lg hover:shadow-xl transform hover:scale-105"
                                }">
                            <span class="text-xl">←</span>
                            <span>Anterior</span>
                        </button>
                        
                        <div class="text-center">
                            <span class="bg-white text-purple-700 px-4 py-2 rounded-full font-bold shadow-lg">
                                ${currentPracticeQuestion + 1} / ${
          practiceQuestions.length
        }
                            </span>
                        </div>
                        
                        <button onclick="nextQuestion()" 
                                class="flex items-center space-x-2 px-6 py-3 rounded-2xl font-bold bg-gradient-to-r from-green-500 to-emerald-600 text-white shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300">
                            <span>Siguiente</span>
                            <span class="text-xl">→</span>
                        </button>
                    </div>

                    <!-- Progress Bar -->
                    <div class="bg-gray-200 rounded-full h-4 shadow-inner">
                        <div class="bg-gradient-to-r from-purple-500 to-pink-600 h-4 rounded-full transition-all duration-500" 
                             style="width: ${
                               (currentPracticeQuestion /
                                 practiceQuestions.length) *
                               100
                             }%"></div>
                    </div>
                </div>
            `;

        document.getElementById("conjugationContent").innerHTML = content;
      }

      // Track user answers for navigation
      let userAnswers = [];

      function checkAnswer(selectedAnswer, correctAnswer) {
        const isCorrect = selectedAnswer === correctAnswer;
        const currentQuestion = practiceQuestions[currentPracticeQuestion];

        // Store the user's answer (only if not already answered)
        if (!userAnswers[currentPracticeQuestion]) {
          userAnswers[currentPracticeQuestion] = {
            selected: selectedAnswer,
            correct: correctAnswer,
            isCorrect: isCorrect,
          };

          if (isCorrect) {
            practiceScore++;
          }
        } else {
          // If already answered, don't do anything
          return;
        }

        // Show feedback
        const buttons = document.querySelectorAll(
          "#conjugationContent .grid button"
        );
        buttons.forEach((btn) => {
          const answer = btn.querySelector("span").textContent;
          if (answer === correctAnswer) {
            btn.className =
              "bg-green-500 text-white border-2 border-green-600 rounded-2xl p-6 shadow-lg transform scale-105";
          } else if (answer === selectedAnswer && !isCorrect) {
            btn.className =
              "bg-red-500 text-white border-2 border-red-600 rounded-2xl p-6 shadow-lg";
          } else {
            btn.className =
              "bg-blue-50 text-blue-400 border-2 border-blue-200 rounded-2xl p-6 shadow-lg opacity-60";
          }
          btn.disabled = true;
        });

        // Show complete sentence feedback
        const questionSection = document.querySelector(
          ".bg-gradient-to-br.from-purple-50"
        );
        const existingFeedback =
          questionSection.querySelector(".feedback-section");
        if (existingFeedback) {
          existingFeedback.remove();
        }

        const feedbackDiv = document.createElement("div");
        feedbackDiv.className =
          "feedback-section mt-6 p-6 rounded-2xl shadow-lg transition-all duration-500";

        if (isCorrect) {
          feedbackDiv.className += " bg-green-100 border-2 border-green-300";
          feedbackDiv.innerHTML = `
                    <div class="text-center">
                        <div class="text-3xl mb-3">🎉</div>
                        <h5 class="text-xl font-bold text-green-800 mb-3">¡Correcto!</h5>
                        <p class="text-lg text-green-700 font-semibold">
                            ${currentQuestion.completeSentence}
                        </p>
                    </div>
                `;
        } else {
          feedbackDiv.className += " bg-red-100 border-2 border-red-300";
          feedbackDiv.innerHTML = `
                    <div class="text-center">
                        <div class="text-3xl mb-3">💪</div>
                        <h5 class="text-xl font-bold text-red-800 mb-3">¡Sigue intentando!</h5>
                        <p class="text-lg text-red-700 font-semibold mb-2">
                            La respuesta correcta es:
                        </p>
                        <p class="text-lg text-green-700 font-bold">
                            ${currentQuestion.completeSentence}
                        </p>
                    </div>
                `;
        }

        questionSection.appendChild(feedbackDiv);

        // Auto-advance to next question after 2.5 seconds
        setTimeout(() => {
          if (currentPracticeQuestion < practiceQuestions.length - 1) {
            currentPracticeQuestion++;
            showPracticeQuestion();
          } else {
            showPracticeResults();
          }
        }, 2500);
      }

      function previousQuestion() {
        if (currentPracticeQuestion > 0) {
          currentPracticeQuestion--;
          showPracticeQuestion();
        }
      }

      function nextQuestion() {
        if (currentPracticeQuestion < practiceQuestions.length - 1) {
          currentPracticeQuestion++;
          showPracticeQuestion();
        } else {
          showPracticeResults();
        }
      }

      function showPracticeResults() {
        // Recalculate score based on user answers
        practiceScore = userAnswers.filter(
          (answer) => answer && answer.isCorrect
        ).length;
        const percentage = Math.round(
          (practiceScore / practiceQuestions.length) * 100
        );
        let emoji = "🎉";
        let message = "¡Excelente trabajo!";
        let color = "from-green-500 to-emerald-600";

        if (percentage < 50) {
          emoji = "💪";
          message = "¡Sigue practicando!";
          color = "from-orange-500 to-red-600";
        } else if (percentage < 80) {
          emoji = "👍";
          message = "¡Buen trabajo!";
          color = "from-yellow-500 to-orange-600";
        }

        let content = `
                <div class="slide-in space-y-8">
                    <!-- Results Header -->
                    <div class="text-center">
                        <div class="inline-flex items-center bg-gradient-to-r ${color} text-white px-8 py-4 rounded-2xl shadow-xl">
                            <span class="text-4xl mr-4">${emoji}</span>
                            <h3 class="text-2xl font-bold">${message}</h3>
                        </div>
                    </div>

                    <!-- Score Display -->
                    <div class="bg-gradient-to-br from-gray-50 to-gray-100 rounded-3xl p-8 shadow-xl border-2 border-gray-200">
                        <div class="text-center">
                            <div class="text-6xl font-bold text-gray-800 mb-4">
                                ${practiceScore}/${practiceQuestions.length}
                            </div>
                            <div class="text-3xl font-bold text-gray-600 mb-6">
                                ${percentage}% Correcto
                            </div>
                            
                            <!-- Progress Circle -->
                            <div class="relative w-32 h-32 mx-auto mb-6">
                                <svg class="w-32 h-32 transform -rotate-90" viewBox="0 0 100 100">
                                    <circle cx="50" cy="50" r="40" stroke="#e5e7eb" stroke-width="8" fill="none"/>
                                    <circle cx="50" cy="50" r="40" stroke="${
                                      percentage >= 80
                                        ? "#10b981"
                                        : percentage >= 50
                                        ? "#f59e0b"
                                        : "#ef4444"
                                    }" 
                                            stroke-width="8" fill="none" stroke-linecap="round"
                                            stroke-dasharray="${
                                              2 * Math.PI * 40
                                            }" 
                                            stroke-dashoffset="${
                                              2 *
                                              Math.PI *
                                              40 *
                                              (1 - percentage / 100)
                                            }"
                                            class="transition-all duration-1000"/>
                                </svg>
                                <div class="absolute inset-0 flex items-center justify-center">
                                    <span class="text-2xl font-bold text-gray-800">${percentage}%</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Action Buttons -->
                    <div class="flex justify-center space-x-4">
                        <button onclick="showPractice()" 
                                class="bg-gradient-to-r from-purple-500 to-pink-600 text-white px-8 py-4 rounded-2xl font-bold shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300">
                            🔄 Practicar de Nuevo
                        </button>
                        <button onclick="showConjugation('AR')" 
                                class="bg-gradient-to-r from-blue-500 to-indigo-600 text-white px-8 py-4 rounded-2xl font-bold shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300">
                            📚 Repasar Teoría
                        </button>
                    </div>
                </div>
            `;

        document.getElementById("conjugationContent").innerHTML = content;
      }

      // Close modal when clicking outside
      document
        .getElementById("verbModal")
        .addEventListener("click", function (e) {
          if (e.target === this) {
            closeModal();
          }
        });
    </script>
    <script>
      (function () {
        function c() {
          var b = a.contentDocument || a.contentWindow.document;
          if (b) {
            var d = b.createElement("script");
            d.innerHTML =
              "window.__CF$cv$params={r:'96c321a8518434d1',t:'MTc1NDY5OTI4Ni4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";
            b.getElementsByTagName("head")[0].appendChild(d);
          }
        }
        if (document.body) {
          var a = document.createElement("iframe");
          a.height = 1;
          a.width = 1;
          a.style.position = "absolute";
          a.style.top = 0;
          a.style.left = 0;
          a.style.border = "none";
          a.style.visibility = "hidden";
          document.body.appendChild(a);
          if ("loading" !== document.readyState) c();
          else if (window.addEventListener)
            document.addEventListener("DOMContentLoaded", c);
          else {
            var e = document.onreadystatechange || function () {};
            document.onreadystatechange = function (b) {
              e(b);
              "loading" !== document.readyState &&
                ((document.onreadystatechange = e), c());
            };
          }
        }
      })();
    </script>
  </body>
</html>
